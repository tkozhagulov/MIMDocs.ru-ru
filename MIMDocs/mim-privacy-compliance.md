---
title: Обработка данных Microsoft Identity Manager | Документация Майкрософт
description: Ознакомьтесь с обработкой данных Microsoft Identity Manager, чтобы определить данные и создать отчет о данных в среде, принять меры в соответствующей системе на основе операционных функций и требований.
keywords: ''
author: fimguy
ms.author: davidste
manager: mbaldiwn
ms.date: 05/22/2018
ms.topic: get-started-article
ms.service: microsoft-identity-manager
ms.technology: security
ms.assetid: b0b39631-66df-4c5f-80c9-a1774346f816
ms.suite: ems
ms.openlocfilehash: e7134e060647153b5d525e9785139eb8c38f8569
ms.sourcegitcommit: 6b2c77788a69f751fc7f5c18e678aa1fabf23ebb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2018
ms.locfileid: "38952511"
---
# <a name="microsoft-identity-manager-data-handling"></a>Обработка данных Microsoft Identity Manager 

В этой статье приводятся рекомендации о том, как организация может определить решения для выполнения поиска, удаления, обновления и создания отчетов об операциях, которые она будет применять для многих связанных источников данных. Прежде чем выбрать подход к операциям удаления или обновления, очень важно ознакомиться с текущей схемой и конфигурацией системы управления идентификацией (MIM). Ниже приведены несколько сценариев, которые клиенты должны рассмотреть, и вопросы, на которые им нужно ответить: 

- Какие данные необходимы для управления идентификацией, чтобы упростить бизнес-процесс?
- Где в MIM будут храниться текущие данные?
- Как вы будете использовать эти данные в системе?
- Используете ли вы эти данные совместно с любыми партнерскими внешними источниками данных (экспортируете их)?
- Что представляет собой заслуживающий доверия источник данных и какой метод обработки данных применяется?
- Какой план по хранению и удалению данных будет использоваться на месте?
- Определили ли вы все технологии, необходимые для обработки данных и управления ими?

Чтобы упростить понимание текущей среды MIM, вы можете использовать следующий инструмент для документирования среды MIM или использовать документы по проектированию реализации.
- [Программа обработки документов MIM — позволяет экспортировать текущую конфигурацию](https://github.com/Microsoft/MIMConfigDocumenter).

## <a name="searching-for-and-identifying-personal-data"></a>Поиск и идентификация персональных данных
Поиск данных в MIM будет зависеть от конфигурации и установки. Большинство сред взаимосвязаны, но для ясности мы разбили их на компоненты высокого уровня.

### <a name="synchronization-service"></a>Служба синхронизации

Все данные в MIM, относящиеся к пользователям, извлекаются из источников данных HR и Active Directory (AD). При поиске личных данных прежде всего стоит обратить внимание на поиск в AD или подключенных источниках данных. 

Если вы сомневаетесь в главном источнике, вы можете отследить этого пользователя из консоли Synchronization Service Manager в MIM. Для этого нужно щелкнуть панель поиска метавселенной, чтобы просмотреть личные данные, которые хранятся в базе данных. Пользователи могут искать конкретного пользователя или атрибут.

- Чтобы просмотреть или найти данные объектов пользователей, сделайте следующее:
    - Откройте клиент службы синхронизации.
        - Просмотрите операции импорта потоков атрибутов и их приоритет в конструкторе метавселенной.
![mim-privacy-compliance_1.PNG](media/mim-privacy-compliance/mim-privacy-compliance_1.PNG)
        - С помощью функции поиска метавселенной вы можете выполнить поиск в любом объекте и атрибуте в базе данных. ![mim-privacy-compliance_2.PNG](media/mim-privacy-compliance/mim-privacy-compliance_2.PNG)
 
Когда объект будет найден, щелкните его, чтобы открыть страницу профиля пользователя. В подробных сведениях об объекте будут содержаться данные о нем, его атрибутах, последних изменениях, главном источнике и связанном подключенном источнике данных, полученные из примера конфигурации агента управления ниже.

![mim-privacy-compliance.PNG](media/mim-privacy-compliance/mim-privacy-compliance.PNG)

### <a name="service-and-portal--pam"></a>Служба и портал. PAM
У вас могут быть установлены экземпляр службы и портала или PAM с возможностью поиска. 

Если вы установили портал, вы можете использовать пользовательский интерфейс для поиска в любом атрибуте или выполнять запрос конкретного пользователя.

Если у вас есть только сервер службы (без пользовательского интерфейса портала), вы можете запустить синтаксис поиска на основе [FIMAutomation PSSnapin]. Пример доступен [здесь](https://social.technet.microsoft.com/wiki/contents/articles/22713.fim-portals-use-powershell-to-find-all-users-without-a-manager.aspx).

PAM может использовать тот же синтаксис выше, или вы можете использовать [модуль MIMPAM](https://docs.microsoft.com/powershell/module/mimpam/get-pamuser?view=idm-ps-2016sp1), в частности, командлет get-pamuser, чтобы найти пользователя в среде PAM.

Другие параметры отчетности для поиска доступных данных находятся в службе и на портале.
- [Гибридные отчеты](https://docs.microsoft.com/microsoft-identity-manager/identity-manager-hybrid-reporting-azure)
- [Отчеты с помощью SCSM](https://docs.microsoft.com/previous-versions/mim/jj133853%28v%3dws.10%29)

### <a name="bhold"></a>BHOLD
Служба Bhold Core включает пользовательский интерфейс, который позволяет вам искать пользователей или атрибуты. 

![поиск bhold](media/mim-privacy-compliance/mim-privacy-compliance-bhold.PNG)

Если для службы синхронизации вы синхронизируете BHOLD с [соединителем управления доступом](https://docs.microsoft.com/microsoft-identity-manager/bhold/bhold-access-management-connector-install), вы сможете увидеть подключенные объекты пользователя и атрибуты, отправляемые в BHOLD Core.

Также вы можете загрузить модуль отчетности BHOLD.

- [Модуль отчетности BHOLD](https://docs.microsoft.com/microsoft-identity-manager/bhold/bhold-concepts-guide#reporting)

### <a name="certificate-management"></a>Управление сертификатами
Поиск службы управления сертификатами встроен в пользовательский интерфейс. Администратор должен запустить службу, выбрать поиск пользователя и просмотреть данные о нем или изменить их.  

![поиск CM](media/mim-privacy-compliance/mim-privacy-compliance-cm.PNG)

## <a name="exporting-personal-data"></a>Экспорт персональных данных
Так как данные, относящиеся к сущностям в MIM, получены из нескольких источников, большинство данных хранится в базе данных службы синхронизации. По этой причине вы должны экспортировать связанные с объектом данные из службы синхронизации MIM, или вы можете определить владельца этих данных.

### <a name="synchronization-service"></a>Служба синхронизации
Службы синхронизации для экспорта данных просто выбирают данные из пользовательского интерфейса поиска, копируют и вставляют их в файл CSV-формата или любого другого. Другой способ экспортировать эти данные — создать MA на основе файлов, чтобы сохранить текущие данные, необходимые для помеченного пользователя. Пример использования MA на основе файлов можно найти [здесь](https://blogs.msdn.microsoft.com/connector_space/2016/11/17/management-agent-configuration-part-4-delimited-text-file-management-agent/).


### <a name="service-and-portal--pam"></a>Служба и портал. PAM
С помощью службы, портала и PAM вы можете экспортировать эти данные, запустив синтаксис поиска на основе [FIMAutomation PSSnapin] (пример можно найти [здесь](https://social.technet.microsoft.com/wiki/contents/articles/22713.fim-portals-use-powershell-to-find-all-users-without-a-manager.aspx)) и передав их по конвейеру в файл формата [CSV](https://docs.microsoft.com/powershell/module/microsoft.powershell.utility/export-csv?view=powershell-6).

PAM может использовать тот же синтаксис выше, или вы можете использовать [модуль MIMPAM](https://docs.microsoft.com/powershell/module/mimpam/get-pamuser?view=idm-ps-2016sp1), в частности, командлет get-pamuser, чтобы найти пользователя в среде PAM и передать данные о нем по конвейеру в файл формата CSV.

- [Пример запроса службы MIM с помощью PowerShell](https://gallery.technet.microsoft.com/Querying-The-FIMMIM-dcb82de3)

### <a name="bhold"></a>BHOLD
Данные Bhold можно экспортировать с помощью модуля отчетности Bhold в файл предпочтительного формата.

### <a name="certificate-management"></a>Управление сертификатами
Данные управления сертификатами, относящиеся к персональным данным, подключены к Active Directory. Администратор может экспортировать эти данные с помощью Active Directory PowerShell.

## <a name="updating-personal-data"></a>Обновление персональных данных

Персональные данные о пользователях или объектах в MIM Solutions обычно выводятся из объекта пользователя в подключенных источниках данных организации. Любые изменения, внесенные в профиль пользователя в источнике HR или другой заслуживающей доверия системе записи, например AD, затем отражаются в службе синхронизации MIM.

### <a name="synchronization-service"></a>Служба синхронизации

Для выполнения операций управления администраторы должны быть частью операций синхронизации или администраторами, определенными [здесь](https://docs.microsoft.com/previous-versions/mim/jj590183(v%3dws.10)).

Обновление данных осуществляется путем определения правил в главном источнике. Консоль управления помогает определить в источнике главный источник для обновления. Другой вариант — создать правило синхронизации или расширение правила для управления обновлением данных, если источник, такой как данные HR, все еще нужно использовать. Это доступные поддерживаемые варианты.

Дополнительные сведения о различных способах обновления атрибутов см. ниже. 

- [Использование расширений правил](https://msdn.microsoft.com/library/windows/desktop/ms698810(v=vs.100).aspx)
- [Общие сведения о синхронизации данных с внешними системами](https://docs.microsoft.com/previous-versions/mim/jj133850(v%3dws.10))

### <a name="service-and-portal--pam"></a>Служба и портал. PAM

Службу и портал для включения данных PAM можно обновить с помощью командлетов FIMAutomation или PAM. При наличии портала вы также можете непосредственно обновить его, выполнив поиск объекта и изменив его. Однако многое зависит от конфигурации. Обычное обновление с портала не означает, что это обновление сработает, так как главный источник очень зависим от общей конфигурации.

### <a name="bhold"></a>BHOLD

Параметры пользователей можно напрямую обновить с помощью пользовательского интерфейса BHOLD Core или соединителя управления доступом.

### <a name="certificate-management"></a>Управление сертификатами

Пользователи в службе управления сертификатами являются отражением из Active Directory. Для обновления используйте Active Directory, чтобы изменить сведения об объекте.

## <a name="deleting-personal-data"></a>Удаление персональных данных

>[!Note] 
> В этой статье приводятся рекомендации по удалению личных данных из Microsoft Identity Manager, и ее можно использовать для соблюдения обязательств в соответствии с GDPR. Если вы ищете общие сведения о GDPR, ознакомьтесь с [разделом о GDPR на портале Service Trust Portal](https://servicetrust.microsoft.com/ViewPage/GDPRGetStarted).

Данные в MIM синхронизируются и всегда обновляются из подключенного источника данных. При удалении объекта в целевом расположении данные объекта в MIM могут сохраняться для целей анализа безопасности. Удаление объекта настраивается для каждого подключенного правила источника данных или расширения (кода) правила и правил удаления объектов.

### <a name="synchronization-service"></a>Служба синхронизации
Служба синхронизации включает множество способов обработки данных или их удаления в зависимости от бизнес-процессов. Ниже приведены некоторые ресурсы, в которых рассматриваются варианты удаления и обновления атрибутов: 

- [Общие сведения об отмене подготовки](https://social.technet.microsoft.com/wiki/contents/articles/1270.understanding-deprovisioning-in-fim.aspx)
- [Использование расширений правил](https://msdn.microsoft.com/library/windows/desktop/ms698810(v=vs.100).aspx)
- [Рекомендации по MIM](https://docs.microsoft.com/microsoft-identity-manager/mim-best-practices)

### <a name="service-and-portal--pam"></a>Служба и портал. PAM

Для службы и портала рекомендуется сохранить стандартную 30-дневную конфигурацию сохранения системных ресурсов. Тогда служба удалит не только данные запроса, но и любой объект, который необходимо удалить из системы. При запуске процесса все данные, связанные с этим объектом, удаляются, включая все данные о регистрации SSPR. Это относится к конфигурации удаления объектов выше. Есть одна таблица, в которой хранятся идентификаторы GUID объектов. Чтобы уменьшить общий размер таблицы в сборке 4.4.1459, мы добавили процесс FIM_DeleteExpiredSystemObjectsJob. Сведения о нем можно найти [здесь](https://support.microsoft.com/en-us/help/4012498/hotfix-rollup-package-build-4-4-1459-0-is-available-for-microsoft-iden).

![mim-privacy-compliance-srrc.PNG](media/mim-privacy-compliance/mim-privacy-compliance-srrc.PNG)


### <a name="bhold"></a>BHOLD

Bhold, как и большинство систем, подключенных к службе синхронизации, можно также удалить после удаления исходного объекта, такого как HR. Это настраивается в агенте управления и контролируется правилами удаления объектов, как описано в функциях службы синхронизации.

Другой вариант — удалить объект пользователя прямо из пользовательского интерфейса BHOLD Core. В зависимости от программы установки удаление может завершиться успешно, но логика подготовки может восстановить этого пользователя, если не удалить его в источнике.
![mim-privacy-compliance-bholdr.PNG](media/mim-privacy-compliance/mim-privacy-compliance-bholdr.PNG)


### <a name="certificate-management"></a>Управление сертификатами
Чтобы удалить пользователя из CM, удалите его в Active Directory.

В службе управления сертификатами будет храниться только UID профиля из служб сертификации с доменом sAMAccountName. После удаления пользователей из AD кэш пользователей будет доступен только для сертификатов, которые они зарегистрировали. Мы не рекомендуем удалять что-либо в базе данных, так как это может повредить работе среды.

## <a name="opt-out-of-telemetry"></a>Отказ от телеметрии
Предыдущие сборки FIM и MIM собирают анонимизированные данные телеметрии о каждом развертывании и передают их по HTTPS на серверы Майкрософт. В прошлом эти данные использовались в Майкрософт для улучшения будущих версий FIM и MIM.

>[!Note] 
> В более поздних версиях (4.5.x.x и выше) сбор данных будет отключен.

Чтобы отключить сбор данных в предыдущей версии, запустите режим изменения и отмените выбор следующей подсказки:

![mim-privacy-compliance-ceip.PNG](media/mim-privacy-compliance/mim-privacy-compliance-ceip.PNG)

Можно также изменить реестр и установить для параметра значение 0: (Component)CEIP HKLM\SOFTWARE\Microsoft\Forefront Identity Manager\2010.

![mim-privacy-compliance-ceip2.PNG](media/mim-privacy-compliance/mim-privacy-compliance-ceip2.PNG)

## <a name="next-steps"></a>Дальнейшие действия 
- [SQL: руководство по конфиденциальности](https://docs.microsoft.com/sql/relational-databases/security/microsoft-sql-and-the-gdpr-requirements?view=sql-server-2017)
- [Раздел о GDPR на портале Service Trust Portal](https://servicetrust.microsoft.com/ViewPage/GDPRGetStarted)
- [Архив FIM 2010. Эксплуатация. Использование Forefront Identity Manager 2010](https://social.technet.microsoft.com/wiki/contents/articles/35789.fim-2010-archive-ramp-up-implementing-forefront-identity-manager-2010.aspx)
