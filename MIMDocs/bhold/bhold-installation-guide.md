---
title: Установка BHOLD с пакетом обновления 1 (SP1) | Документация Майкрософт
description: Документация по установке BHOLD с пакетом обновления 1 (SP1)
keywords: ''
author: billmath
ms.author: billmath
manager: mtillman
ms.date: 09/11/2017
ms.topic: article
ms.prod: microsoft-identity-manager
ms.assetid: ''
ms.openlocfilehash: d5edf4c16f32c401db32abb9bab1fa7e9e23e4a5
ms.sourcegitcommit: 7de35aaca3a21192e4696fdfd57d4dac2a7b9f90
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/16/2018
ms.locfileid: "49358507"
---
# <a name="microsoft-bhold-suite-sp1-60-installation-guide"></a>Руководство по установке Microsoft BHOLD Suite с пакетом обновления 1 (SP1) (6.0)

Microsoft® BHOLD Suite с пакетом обновления 1 (SP1) — это набор приложений, который при использовании с Microsoft Identity Manager 2016 с пакетом обновления 1 (SP) (MIM) добавляет в MIM функции эффективного управления ролями, аналитики и аттестации. Microsoft BHOLD Suite с пакетом обновления 1 (SP) состоит из следующих модулей.

- BHOLD Core
- Соединитель управления доступом
- BHOLD FIM/MIM Integration
- BHOLD Model Generator
- BHOLD Analytics
- BHOLD Reporting
- BHOLD Attestation


> [!NOTE]
> **Применяется к**: Microsoft Identity Manager 2016 (MIM) с пакетом обновления 1 (SP1).

## <a name="what-this-document-covers"></a>Содержание документа

В этом документе описывается планирование развертывания BHOLD в соответствии с потребностями вашей организации и установка каждого модуля BHOLD. Для каждого модуля приводятся сведения о соответствующем оборудовании, инфраструктуре, требования к программному обеспечению, конфигурации предустановки сети, а также сведения, необходимые во время установки, и описание действий, выполняемых после установки (при их наличии).

## <a name="pre-requisite-knowledge"></a>Что нужно знать до начала работы

В этом документе предполагается, что вам известны основные принципы установки программного обеспечения на серверах. Здесь также предполагается, что у вас есть базовые знания о доменных службах Active Directory®, Microsoft Identity Manager с пакетом обновления 1 (FIM) и ПО для баз данных Microsoft SQL Server 2008. Описание процедур установки и настройки зависимых технологий, таких как AD DS и FIM, выходит за рамки данной документации. Сведения о функциях, выполняемых модулями Microsoft BHOLD, см. в [руководстве по основным понятиям Microsoft BHOLD Suite](https://technet.microsoft.com/library/jj134102(v=ws.10).aspx).

## <a name="audience"></a>Аудитория

Этот документ предназначен для ИТ-планировщиков, системных архитекторов, специалистов, принимающих решение в области технологий, консультантов, специалистов по планированию инфраструктуры и ИТ-специалистов, участвующих в развертывании Microsoft BHOLD Suite.

## <a name="bhold-infrastructure-considerations"></a>Рекомендации относительно инфраструктуры BHOLD

Чаще всего FIM и BHOLD используются в среде с крупными инфраструктурами. Архитектуру BHOLD и FIM можно настроить в соответствии с конкретными бизнес-требованиями. В следующих разделах приводится ряд возможных архитектурных решений. В этом документе указаны не все возможные варианты, но предлагаются способы развертывания BHOLD в сети.
 
Сведения в этом разделе охватывают следующие области.

- Архитектура с одним сервером
- Архитектура с двумя серверами
- Двухуровневая архитектура
- Рекомендации по настройке SQL Server

### <a name="single-server-architecture"></a>Архитектура с одним сервером

Для развертывания в небольших организациях или в целях разработки можно установить BHOLD и FIM на одном сервере с SQL Server и AD DS, как показано на следующем рисунке.
 
![Архитектура с одним сервером](media/bhold-installation-guide/single.png)

При установке BHOLD Suite с пакетом обновления 1 (SP1) вместе с порталом FIM на одном сервере необходимо создать разные псевдонимы узлов (записи CNAME или A) в DNS для FIM и BHOLD. Это позволит создать отдельные имена субъектов-служб (SPN) для служб BHOLD и FIM. Дополнительные сведения см. в статье [BHOLD Core Installation](https://technet.microsoft.com/library/jj134095(v=ws.10).aspx) (Установка модуля BHOLD Core).
Руководство по установке FIM в конфигурации с одним сервером см. в статье [Common Configuration for Getting Started Guides](https://technet.microsoft.com/library/ff575965.aspx) (Общая конфигурация для руководств по началу работы) в библиотеке Microsoft TechNet.

### <a name="dual-server-architecture"></a>Архитектура с двумя серверами

Установка BHOLD Core и FIM на отдельных серверах обеспечивает более высокую производительность и гибкость для организаций среднего размера, которым не требуется более сложное развертывание, например как существующее в многоуровневых архитектурах. На следующем рисунке показаны BHOLD и FIM, установленные на собственных серверах. Сервер FIM работает под управлением SQL Server для предоставления служб базы данных для BHOLD и FIM. Служба синхронизации FIM, запущенная на сервере FIM, синхронизирует изменения между базами данных FIM и BHOLD. Обратите внимание, что если требуются возможности самообслуживания пользователей, необходимо установить модуль BHOLD FIM Integration на том же сервере, где установлены служба FIM и портал FIM. Для модуля BHOLD FIM Integration требуется, чтобы служба FIM и модуль BHOLD FIM Integration были установлены на одном сервере.

![Архитектура с двумя серверами](media/bhold-installation-guide/dual.png)

> [!IMPORTANT]
> Для функции отчетности модуля BHOLD FIM Integration требуется, чтобы базы данных BHOLD и FIM были установлены на одном экземпляре SQL Server, а учетная запись службы BHOLD должна иметь права доступа к базе данных службы FIM.

### <a name="two-tier-architecture"></a>Двухуровневая архитектура

В большинстве сред, особенно там, где важна производительность, BHOLD Suite с пакетом обновления 1 (SP1), FIM и SQL Server следует запускать на отдельных серверах (двухуровневая архитектура). В двухуровневой архитектуре ресурсы памяти и ЦП выделяются для каждого уровня. Ниже показан один из возможных способов настройки двухуровневой архитектуры. Служба синхронизации FIM, запущенная на сервере FIM, синхронизирует изменения между базами данных FIM и BHOLD. Обратите внимание, что если требуются возможности самообслуживания пользователей, необходимо установить модуль BHOLD FIM Integration на том же сервере, где установлены служба и портал FIM.

![двухуровневая архитектура](media/bhold-installation-guide/two-tier.png)

### <a name="sql-server-recommendations"></a>Рекомендации по настройке SQL Server

При развертывании BHOLD в крупной организации настоятельно рекомендуется следовать приведенным далее рекомендациям по настройке базы данных Microsoft SQL Server.

- Разверните SQL Server на сервере, отличном от сервера со службами FIM и BHOLD.
- Изолируйте файл журнала от файла данных на уровне физического диска.
- При использовании RAID для обеспечения избыточности хранилища используйте RAID уровня 10 (1 + 0). Не используйте RAID уровня 5.
- Настройте правильные параметры при использовании более 2 ГБ физической памяти для сервера SQL Server.
- Для достижения оптимальной производительности BHOLD используйте Microsoft SQL Server 2008 R2 или более позднюю версию.

Дополнительные сведения о рекомендациях по работе с SQL Server см. в статье [Storage Top 10 Best Practices](https://www.microsoft.com/technet/prodtechnol/sql/bestpractice/storage-top-10.mspx) (10 лучших рекомендаций для хранилища) в библиотеке Microsoft TechNet.

### <a name="trusted-certificates-list-update"></a>Обновление списка доверенных сертификатов

Windows можно настроить для проверки цепочек сертификатов перед запуском службы. В таких системах служба не запускается, если исполняемый код службы был подписан сертификатом, который не входит в список доверенных сертификатов (TCL) сервера. Программное обеспечение Microsoft BHOLD Suite с пакетом обновления 1 (SP1) подписано с использованием цепочки сертификатов подписи кода, источником которой является корневой центр сертификации Майкрософт 2010.
Windows можно настроить для получения корневых сертификатов из корпорации Майкрософт через подключение к Интернету. Но в отключенной системе Windows Server включает в себя только те сертификаты, которые присутствовали в корневой программе до выпуска Windows. В выпусках Windows Server до Windows Server 2010 в число этих сертификатов не будет входить корневой сертификат, необходимый для проверки цепочки сертификатов подписывания кода для BHOLD Suite с пакетом обновления 1 (SP1). Если планируется установить один модуль Microsoft BHOLD Suite с пакетом обновления 1 (SP1) или несколько в системе, где может отсутствовать актуальная версия списка TCL, перед установкой модуля необходимо скачать и установить пакет обновления корневого сертификата или установить его с помощью групповой политики. Дополнительные сведения см. в разделе со [списком членов программы корневых сертификатов Windows](http://support.microsoft.com/kb/931125).

### <a name="installing-bhold-suite-sp1-on-windows-server-20122016-required-step"></a>Установка BHOLD Suite с пакетом обновления 1 (SP1) в Windows Server 2012 или 2016 — обязательный шаг. 

![Службы IIS, установка BHOLD](media/bhold-installation-guide/iis-install-bhold.png)

При установке BHOLD Suite с пакетом обновления 1 (SP1) в Windows Server 2012 или 2016 веб-страницы BHOLD будут доступны только после внесения изменений в файл applicationHost.config, расположенный в ```C:\Windows\System32\inetsrv\config```. В разделе ```<globalModules>``` добавьте ```preCondition="bitness64``` в запись, которая начинается с ```<add name="SPNativeRequestModule"```, чтобы она имела следующий вид.

```<add name="SPNativeRequestModule" image="C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\15\isapi\spnativerequestmodule.dll" preCondition="bitness64"/>```

После изменения и сохранения файла выполните команду iisreset, чтобы сбросить настройки сервера IIS.


## <a name="upgrading-bhold-suite"></a>Обновление BHOLD Suite

Невозможно обновить существующую установку BHOLD Suite. Вместо этого необходимо удалить существующую установку BHOLD Suite перед обновлением модулей BHOLD. При наличии существующей модели ролей BHOLD можно обновить базу данных BHOLD и использовать ее при установке обновленного модуля BHOLD Core. Дополнительные сведения см. в статье [Replacing BHOLD Suite with BHOLD Suite SP1](https://technet.microsoft.com/library/jj874043(v=ws.10).aspx) (Замена BHOLD Suite на BHOLD Suite с пакетом обновления 1 (SP1)).


## <a name="next-steps"></a>Дальнейшие шаги

- [Справочник разработчика BHOLD](../reference/mim2016-bhold-developer-reference.md)
- [Журнал версий BHOLD](../reference/version-bhold-history.md)
