---
title: Установка модуля BHOLD Core | Документация Майкрософт
description: Документ по установке BHOLD Suite
keywords: ''
author: billmath
ms.author: billmath
manager: mtillman
ms.date: 09/07/2017
ms.topic: article
ms.prod: microsoft-identity-manager
ms.assetid: ''
ms.openlocfilehash: 48ff4a06233ba95288432c4cfe48e37b4d1449ab
ms.sourcegitcommit: 7de35aaca3a21192e4696fdfd57d4dac2a7b9f90
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/16/2018
ms.locfileid: "49358743"
---
# <a name="bhold-core-installation"></a>Установка модуля BHOLD Core

Модуль BHOLD Core предоставляет основные функции BHOLD Suite в вашей среде. Модуль BHOLD Core необходимо установить и настроить на сервере в локальной сети перед установкой других модулей BHOLD Suite.

## <a name="bhold-core-installation-requirements"></a>Требования к установке BHOLD Core

Модуль BHOLD Core является основой Microsoft BHOLD Suite. Модуль BHOLD Core необходимо установить перед установкой других модулей Microsoft BHOLD Suite.

### <a name="bhold-core-hardware-requirements"></a>Требования к оборудованию для BHOLD Core

Модуль BHOLD Core является основой Microsoft BHOLD Suite. Модуль BHOLD Core необходимо установить перед установкой других модулей Microsoft BHOLD Suite.

|          |        |          |
|----------|--------|----------|
|**Компонент** |**Минимальные требования** | **Рекомендуемые требования** |
|Процессор | 64-разрядный процессор | Многоядерный 64-разрядный процессор |
| Память |3 ГБ | 6 ГБ или более |
|Хранилище| 30 ГБ доступного пространства |Зависит от размера развертывания |
|Сетевой адаптер| Подключение к серверу SQL и серверу Forefront Identity Manager (FIM) со скоростью 100 Мбит/с | Подключение к серверу SQL и серверу FIM со скоростью 1 Гбит/с|

Эти рекомендации основаны на стандартных реализациях и в них не учитываются другие приложения, запущенные на этом сервере. В зависимости от конкретной среды может потребоваться использовать более высокопроизводительные компоненты.

### <a name="bhold-core-software-requirements"></a>Требования к программному обеспечению BHOLD Core

Модуль BHOLD Core должен быть установлен на компьютере, который удовлетворяет следующим требованиям.

- На сервере должна быть установлена ОС Windows Server 2012 (64-разрядная версия), Windows Server 2016. 
- Сервер должен входить в домен доменных служб Active Directory (AD DS). В средах тестирования сервер может быть контроллером домена AD DS.
- Модуль BHOLD Core должен устанавливать пользователь, вошедший в систему с использованием учетной записи в одном домене с сервером и входящий в группу "Администраторы домена" в домене и в группу "Администраторы" на сервере.
- На сервере должны быть установлены службы Microsoft Internet Information Services (IIS) с ASP.NET. Службы IIS должны быть настроены с включенной проверкой подлинности Windows. Если модуль BHOLD Core устанавливается в Windows Server 2012 или 2016, следует установить совместимость управления IIS 6. Если модуль BHOLD Core устанавливается в Windows Server 2012, следует установить средства для работы со сценариями IIS 6.
- Должна быть установлена платформа .NET 3.5.
  - Так как для BHOLD Core требуется .NET 3.5, он не может устанавливаться на основных серверных компонентах.
- Для других модулей BHOLD требуется Silverlight 4, поэтому рекомендуется установить его до установки BHOLD Core.
- Microsoft SQL Server 2014 или Microsoft SQL Server 2016 должны быть установлены на сервере BHOLD Core или на другом сервере в локальной сети. 

На клиентских компьютерах Windows должны работать Microsoft Internet Explorer 6 или более поздней версии и Microsoft Silverlight 4 или более поздней версии.

## <a name="before-you-begin"></a>Подготовка к работе

Для модуля BHOLD Core требуется учетная запись пользователя, которая используется для проверки подлинности и авторизации службы BHOLD Core на сервере и других сетевых объектах. В этом разделе описывается создание и настройка этой учетной записи пользователя и приводится таблица предустановки, которая поможет собрать информацию, необходимую для выполнения программы BHOLD Core.

>{ВАЖНО}. При установке BHOLD Core можно использовать существующую базу данных SQL Server в качестве базы данных BHOLD Core. Или можно разрешить мастеру установки BHOLD Core создать базу данных BHOLD автоматически. Если вы решили использовать существующую базу данных, другие пользователи не должны обращаться к ней во время установки модуля BHOLD Core. Перед установкой модуля BHOLD Core проверьте, что средства управления доступом базы данных SQL Server запрещают доступ всем, кроме пользователя, устанавливающего модуль BHOLD Core.

## <a name="required-user-and-group"></a>Требуемые пользователь и группа

Модуль BHOLD Core должен иметь возможность входа в домен с использованием учетной записи пользователя, выделенной для этой цели и входящей в две конкретные группы безопасности, включая ту, которая специально создается для модуля BHOLD Core. Для выполнения этой процедуры требуется членство в группе "Администраторы домена".
**Создание и настройка группы пользователей и группы безопасности BHOLD Core**

1.  На основном контроллере домена в меню **Пуск** последовательно выберите пункты **Администрирование** и **Active Directory — пользователи и компьютеры**.

2.  В дереве консоли разверните домен, где будет создана учетная запись, правой кнопкой мыши щелкните **Пользователи**, выберите **Создать** и щелкните **Группа**.

3.  В окне **Новый объект — группа** в поле **Имя группы** введите имя группы (значение по умолчанию в BHOLD: BHOLDApplicationGroup), а затем нажмите кнопку **ОК**.

4.  Щелкните правой кнопкой мыши узел **Пользователи**, выберите команду **Создать**, а затем выберите пункт **Пользователь**.

5.  В поле **Полное имя** введите имя, которое поможет идентифицировать учетную запись, например "Учетная запись службы BHOLD".

6.  В поле **Имя входа пользователя** введите имя пользователя учетной записи службы BHOLD Core (значение по умолчанию в BHOLD: b1user), а затем нажмите кнопку **Далее**.

7.  В полях **Пароль** и **Подтверждение пароля** введите пароль учетной записи службы.

8.  Снимите флажок **Требовать смены пароля при следующем входе в систему**, установите флажки **Запретить смену пароля пользователем** и **Срок действия пароля не ограничен**, нажмите кнопку **Далее**, а затем — **Готово**.

9.  В области результатов консоли щелкните правой кнопкой мыши учетную запись пользователя, а затем выберите **Добавить в группу**.

10. В диалоговом окне **Выбор групп** введите отображаемое имя группы, созданной ранее, введите точку с запятой (";"), а затем введите IIS_IUSRS.

11. Щелкните **Проверить имена** и нажмите кнопку **ОК**.  

Следующая процедура выполняется на компьютере, где должен быть установлен модуль BHOLD Core. Для выполнения этой процедуры необходимо войти в систему с использованием прав члена группы "Администраторы домена".

## <a name="bhold-core-installation-worksheet"></a>Таблица сведений для установки модуля BHOLD Core

Перед установкой модуля BHOLD Core необходимо подготовить сведения, которые потребуются мастеру установки модуля BHOLD Core для завершения установки. Сведения в следующей таблице помогут пройти все шаги мастера. Каждый раздел соответствует странице мастера установки BHOLD Core.

### <a name="account-settings"></a>Параметры учетной записи

| **Элемент**                                    | **Описание**                                                                                                                                                                                                                                                                                             | **Значение**                                                                                                                                                          |
|---------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Использовать поставщик безопасности в домене или на компьютере** | Выбранный параметр указывает, что система безопасности доменных служб Active Directory управляет доступом к модулю BHOLD Core.                                                                                                                                                                                                  | Установите требуемый флажок. **Важно**. Если этот флажок не установлен, установка завершится ошибкой.                                                                 |
| **Домен**                                  | Указывает домен, содержащий BHOLD сервер, учетная запись службы и группы приложений. **Важно**. Укажите имя домена, используя краткое имя NetBIOS, а не полное доменное имя (FQDN). Например, если полное доменное имя — fabrikam.com, укажите имя домена как FABRIKAM. | Запишите доменное имя:                                                                                                                                        |
| **Группа приложений**                       | Указывает имя группы безопасности, созданной ранее в разделе [Требуемые пользователь и группа](https://technet.microsoft.com/library/jj134095(v=ws.10).aspx#rug).                                                                                                                                  | Запишите имя группы:                                                                                                                                         |
| **Пользователь службы**                            | Указывает имя входа учетной записи пользователя службы, созданной ранее в разделе [Требуемые пользователь и группа](https://technet.microsoft.com/library/jj134095(v=ws.10).aspx#rug).                                                                                                                      | Запишите имя учетной записи пользователя:                                                                                                                                  |
| **Пароль**                                | Указывает пароль для учетной записи пользователя службы BHOLD Core.                                                                                                                                                                                                                                              | Запишите пароль: **Важно**. Пароль необходимо хранить в безопасном и надежном месте.                                                                |
| **IP-адрес или порт веб-сайта**                         | Указывает IP-адрес и номер порта веб-сайта, создаваемого на сервере в интрасети. Измените значение по умолчанию (\*) только в том случае, если вы не будете использовать тот же IP-адрес в качестве веб-сайта по умолчанию. Измените номер порта на доступный порт только в том случае, если уже используется значение по умолчанию порта (5151).             | Если веб-сайт по умолчанию использует IP-адрес не по умолчанию, запишите его: Если номер порта по умолчанию уже используется, запишите номер порта веб-сайта BHOLD. |

### <a name="database-settings"></a>Параметры базы данных

| **Элемент**                                       | **Описание**                                                                                                                                                                                                                                                           | **Значение**                                                                                                                                                                                                                                                                                                                                                                                             |
|------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Использовать встроенную безопасность**                    | Указывает, что для доступа к базе данных используется проверка подлинности Windows.                                                                                                                                                                                                     | Установите флажок, если для подключения к SQL Server используется проверка подлинности Windows. Снимите флажок, если используется проверка подлинности SQL Server. Если используется проверка подлинности SQL Server, база данных должна быть создана до запуска программы установки BHOLD Core. **Примечание**. Если используется проверка подлинности Windows, необходимо войти в систему с помощью учетной записи с ролью сервера sysadmin на сервере базы данных. |
| **Пользователь базы данных** и **Пароль баз данных** | Указывает имя пользователя и пароль пользователя с ролью сервера sysadmin на сервере базы данных. Эти значения указываются только в том случае, если используется проверка подлинности SQL Server.                                                                                               | Запишите имя пользователя SQL Server: Запишите пароль пользователя SQL Server: **Примечание**. Пароль необходимо хранить в безопасном и надежном месте.                                                                                                                                                                                                                                                  |
| **Сервер базы данных** и **Имя базы данных**   | Указывает NetBIOS-имя сервера базы данных и имя базы данных (по умолчанию: b1), которая будет создана программой установки BHOLD Core. Если вы не использует экземпляр сервера базы данных по умолчанию, укажите экземпляр сервера базы данных в формате *\<сервер\>*\\*\<экземпляр\>*. | Запишите имя сервера (или сервер и экземпляр): Запишите имя базы данных:                                                                                                                                                                                                                                                                                                                   |
| **Создать ограничения для пользователя базы данных**    | Устаревшие.                                                                                                                                                                                                                                                                 | Не изменяйте значение по умолчанию.                                                                                                                                                                                                                                                                                                                                                                       |
|                                                |                                                                                                                                                                                                                                                                           |                                                                                                                                                                                                                                                                                                                                                                                                       |
|                                                |                                                                                                                                                                                                                                                                           |                                                                                                                                                                                                                                                                                                                                                                                                       |

## <a name="bhold-core-setup"></a>Установка модуля BHOLD Core

Чтобы установить модуль BHOLD Core, войдите в систему как член группы "Администраторы домена", скачайте следующий файл и запустите его от имени администратора на сервере, где вы собираетесь установить модуль BHOLD Core: 

- BholdCore *\<версия\>*\_Release.msi

Замените *\<версия\>* на номер версии устанавливаемого выпуска BHOLD Core.

Чтобы запустить файл программы от имени администратора, щелкните его правой кнопкой мыши и выберите пункт **Запуск от имени администратора**.

### <a name="postinstallation-settings"></a>Параметры, настраиваемые после установки

После завершения установки BHOLD Core необходимо настроить брандмауэр Windows и изменить дополнительные параметры в пуле приложений в службах IIS. При необходимости следует также изменить системные атрибуты BHOLD в соответствии с вашими требованиями.

#### <a name="configuring-windows-firewall"></a>Настройка брандмауэра Windows

Если пользователи будут получать доступ к BHOLD с помощью веб-браузеров на удаленных компьютерах, необходимо настроить брандмауэр Windows на сервере BHOLD Core для разрешения входящих подключений на порту веб-сайта, указанного при установке BHOLD Core.

Выполнить эту процедуру может только член группы "Администраторы" на локальном компьютере.

#### <a name="to-permit-incoming-connections-to-the-bhold-website"></a>Разрешение входящих подключений к веб-сайту BHOLD

1.  Нажмите кнопку **Пуск**, последовательно выберите **Администрирование**, щелкните правой кнопкой мыши **Брандмауэра Windows с дополнительными параметрами**, а затем щелкните **Запуск от имени администратора**.

2.  В левой области щелкните **Правила для входящих подключений**, а затем в правой области выберите **Создать правило**.

3.  В мастере создания правил для входящих подключений щелкните **Порт**, а затем нажмите кнопку **Далее**.

4.  Убедитесь, что для параметра **Определенные локальные порты** выбрано значение **TCP**, введите номер порта по BHOLD Core по умолчанию (5151) или номер порта, указанный при установке BHOLD Core, а затем нажмите кнопку  **Далее**.

5.  Включите параметр **Разрешить подключение**, а затем нажмите кнопку **Далее**.

6.  На странице **Профиль** снимите флажки для расположений, из которых вы не хотите получать доступ к веб-сайту BHOLD, а затем нажмите кнопку **Далее**.

7.  На странице **Имя** введите имя правила (например, "Разрешать входящие подключения к BHOLD Core"), а затем нажмите кнопку **Готово**.  

#### <a name="enabling-32-bit-applications-for-the-bhold-core-application-pool"></a>Разрешение 32-разрядных приложений для пула приложений BHOLD Core

Чтобы службы IIS правильно работали с модулем BHOLD Core, необходимо настроить пул приложений BHOLD Core для поддержки 32-разрядных приложений. Для выполнения этой процедуры необходимо войти в систему с помощью учетной записи, используемой для установки модуля BHOLD Core.

**Включение поддержки 32-разрядных приложений для пула приложений BHOLD Core**

1.  Чтобы запустить диспетчер служб IIS, нажмите кнопку **Пуск**, выберите **Администрирование** и щелкните **Диспетчер служб IIS**.

2.  В дереве консоли разверните имя сервер и щелкните **Пулы приложений**.

3.  В списке **Пулы приложений** щелкните правой кнопкой элемент **CoreAppPool**, а затем выберите пункт **Дополнительные параметры**.

4.  В диалоговом окне **Дополнительные параметры** в списке **Разрешены 32-разрядные приложения** выберите значение **True**, а затем нажмите кнопку **ОК**.

#### <a name="establishing-the-service-principal-name-for-the-bhold-website"></a>Установка имени субъекта-службы для веб-сайта BHOLD

Если сетевое имя, которое используется для связи с веб-сайтом BHOLD, не совпадает с именем узла сервера, необходимо установить имя субъекта-службы (SPN) для протокола HTTP. Например, если вы используете запись ресурса CNAME в DNS, чтобы указать псевдоним для сервера, или если вы используете балансировку сетевой нагрузки, необходимо зарегистрировать эти дополнительные сетевые адреса в Active Directory. В противном случае Internet Explorer не может использовать протокол Kerberos при подключении к веб-сайту BHOLD.

> [!IMPORTANT]
> Если модуль BHOLD Core установлен на том же компьютере, где и портал FIM, необходимо создать записи ресурсов DNS (CNAME и A) с разными именами узлов для серверов с BHOLD Core и серверов с порталом FIM. Для конкретной пары тип службы/псевдоним сервера может быть установлено только одно имя субъекта-службы, поэтому для BHOLD Core и портала FIM требуются отдельные имена субъектов-служб, так как они обычно выполняются под разными учетными записями. Команда setspn сообщает об ошибке, если имя субъекта-службы уже установлено под другой учетной записью.

Членство в группе **Администраторы домена** или эквивалентной является минимальным требованием для выполнения данной процедуры.

#### <a name="to-establish-the-spn-of-the-bhold-website"></a>Установка имени субъекта-службы веб-сайта BHOLD

1.  В контроллере домена доменных служб Active Directory нажмите кнопку **Пуск**, последовательно выберите **Все программы** и **Стандартные**, щелкните правой кнопкой мыши пункт **Командная строка** и выберите **Запуск от имени администратора**.

2.  В командной строке введите следующую команду и нажмите клавишу ВВОД: setspn –S HTTP/ *\<псевдоним_сети\> \<домен\>* \\ *\<имя_учетной_записи\>*, где:

    -   *\<псевдоним_сети\>*  — адрес, который клиенты используют для доступа к веб-сайту BHOLD;

    -   *\<домен\>*\\*\<имя_учетной_записи\>*  — домен и имя учетной записи службы BHOLD Core, созданные при установке BHOLD Core.

3.  Повторите предыдущий шаг для всех других имен, используемых клиентами для доступа к веб-сайту BHOLD, например псевдонимы CNAME, имена, которые содержат полное доменное имя, или имена, которые содержат краткое доменное имя NetBIOS.

#### <a name="setting-bhold-system-attributes"></a>Установка системных атрибутов BHOLD

Чтобы проверить успешную установку модуля BHOLD Core, откройте портал BHOLD Core и просмотрите системные атрибуты. Кроме того, для обеспечения правильной работы модуля BHOLD Core в среде можно изменить следующие системные атрибуты BHOLD, как показано далее.

| **Атрибут**                | **Описание**                                                                                                                                                                                                                                                                                                      |
|------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **NoHistory**                | Выберите "Y" (Да), если веб-сайт BHOLD запущен в кластеризованной веб-службе для обеспечения правильной работы недавно отображенных элементов. Выберите "N" (Нет), если веб-сайт BHOLD запущен на автономном сервере IIS.                                                                                                                      |
| **MoveorgunitToSameorgtype** | Выберите "Y" (Да), чтобы подразделения можно было перемещать только в подразделения с тем же организационным типом, что и у родительского подразделения. Например, это не позволит перемещать подразделение проекта в подразделение отдела. Выберите "N" (Нет), чтобы запретить размещение подразделения в подразделении другого типа. |
| **Количество дней между запусками ABA**     | Задайте двузначное целое число, чтобы указать интервал (в днях) между двумя запусками авторизации на основе атрибутов (ABA). Например, чтобы указать, что между запусками ABA будут проходить два дня, введите "02".                                                                                                                     |
| **Час начала запуска ABA**    | Задайте двузначное целое число, чтобы указать час дня, когда начнется запуск авторизации на основе атрибутов. Например, чтобы указать, что запуск ABA начнется в 23:00, введите "23".                                                                                                             |
| **Количество элементов системы**       | Выберите "Y" (Да), чтобы проверять количество элементов системы в BHOLD. По умолчанию используется значение "Y" (Да).                                                                                                                                                                                                                             |
| **Ведение журнала**                  | Выберите "N" (Нет), если не требуется регистрировать изменения в журнале. По умолчанию используется значение "Y" (Да).                                                                                                                                                                                                                                            |
| **Обработка системной очереди**   | Выберите "N" (Нет), чтобы запретить обработку системной очереди. Не изменяйте это значение, пока не получите соответствующие указания от службы поддержки продукта.                                                                                                                                                                                           |

Для выполнения этой процедуры необходимо войти в систему с использованием прав члена группы "Администраторы домена".

**Установка системных атрибутов BHOLD**

1.  Нажмите кнопку **Пуск**, выберите пункт **Все программы** и щелкните **Internet Explorer**.

2.  В поле адреса введите, где *\<сервер\>*  — это имя сервера веб-сайта BHOLD, а *\<порт\>*  — номер порта, привязанного к веб-сайту.

3.  Щелкните **Главная**, щелкните **Значения**, а затем нажмите кнопку **Изменить**.

4.  Найдите имя атрибута, которое требуется изменить, введите новое значение в поле рядом с именем атрибута, а затем нажмите кнопку **ОК**.

## <a name="next-steps"></a>Дальнейшие шаги

После установки модуля BHOLD Core и проверки успешности установки можно установить дополнительные модули. На этом этапе база данных BHOLD будет в основном пустой — она содержит только одну учетную запись пользователя (привилегированную учетную запись) и одно подразделение (привилегированное подразделение). Чтобы добавить дополнительных пользователей в базу данных BHOLD, в зависимости от потребностей можно установить модуль соединителя управления доступом или модуль BHOLD Model Generator. Модуль соединителя управления доступом можно использовать для импорта данных пользователей из службы синхронизации FIM или использовать модуль BHOLD Model Generator для импорта данных пользователей из набора структурированных файлов. Дополнительные сведения об использовании модуля соединителя управления доступом см. в статье [Test Lab Guide: BHOLD Access Management Connector](https://technet.microsoft.com/library/jj853085(v=ws.10).aspx) (Руководство по лаборатории тестирования: соединитель управления доступом BHOLD).

Дополнительные сведения об использовании модуля BHOLD Model Generator см. в статьях:

- [Microsoft BHOLD Suite Concepts Guide](https://technet.microsoft.com/library/jj134102(v=ws.10).aspx) (Руководство по основным понятиям Microsoft BHOLD Suite);
- [Microsoft BHOLD Suite TechnicalReference](https://technet.microsoft.com/library/jj134935(v=ws.10).aspx) (Технический справочник по Microsoft BHOLD Suite).
